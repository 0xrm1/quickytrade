#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Check if package.json was changed
if git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD | grep --quiet "package.json"; then
  echo "📦 package.json changed. Running npm install..."
  npm install
fi

# Check if .env.example was changed
if git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD | grep --quiet ".env.example"; then
  echo "🔑 .env.example changed. Please update your .env file accordingly."
fi

# Check if docker-compose files were changed
if git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD | grep --quiet "docker-compose"; then
  echo "🐳 Docker configuration changed. You may need to rebuild containers:"
  echo "npm run build && npm start"
fi 